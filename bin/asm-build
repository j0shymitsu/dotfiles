#!/bin/bash

# Check if filename provided
if [ $# -eq 0 ]; then
    echo "Usage: asm-build <filename.asm>"
    exit 1
fi

# Get filename without extension
filename="${1%.*}"

# Assemble
echo "Assembling $1..."
nasm -f elf64 "$1" -o "${filename}.o"

if [ $? -ne 0 ]; then
    echo "Assembly failed!"
    exit 1
fi

# Link
echo "Linking..."
ld "${filename}.o" -o "$filename"

if [ $? -ne 0 ]; then
    echo "Linking failed!"
    exit 1
fi

echo "Build successful! Run with: ./$filename"

